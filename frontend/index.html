<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T∆∞ V·∫•n S·ª©c Kh·ªèe - Chatbot H·ªó Tr·ª£ S·ª©c Kh·ªèe 24/7</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main App -->
    <div id="mainApp" class="main-app">
        <div class="container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="logo-section">
                    <h1>üè• T∆∞ V·∫•n S·ª©c Kh·ªèe</h1>
                    <p>Tr·ª£ L√Ω S·ª©c Kh·ªèe H√†ng Ng√†y</p>
                    <p style="font-size: 12px; color: #666; margin-top: 5px;">üí™ ƒÇn T·ªët | T·∫≠p T·ªët | Ng·ªß T·ªët | S·ªëng T·ªët</p>
                </div>
                
                <!-- User Info -->
                <div class="user-info">
                    <div id="userDisplay" class="user-display">
                        <p id="userName">User</p>
                        <p id="userRole" class="user-role">User</p>
                    </div>
                </div>
                
                <nav class="nav-menu">
                    <button class="nav-btn active" data-section="chat">
                        <span>üí¨</span> Chat T∆∞ V·∫•n
                    </button>
                    <button class="nav-btn" data-section="search">
                        <span>üîç</span> T√¨m Ki·∫øm
                    </button>
                    <button class="nav-btn" data-section="history">
                        <span>üìù</span> L·ªãch S·ª≠
                    </button>
                    <button class="nav-btn" data-section="kb-info">
                        <span>üìö</span> Th√¥ng Tin C√¥ng Ty
                    </button>
                    <!-- Admin Menu -->
                    <div id="adminMenu" class="admin-menu hidden">
                        <hr style="margin: 10px 0; border: none; border-top: 1px solid #ddd;">
                        <button class="nav-btn" data-section="admin-users">
                            <span>üë•</span> Qu·∫£n L√Ω User
                        </button>
                        <button class="nav-btn" data-section="admin-audit">
                            <span>üìä</span> Audit Log
                        </button>
                        <button class="nav-btn" data-section="admin-stats">
                            <span>üìà</span> Th·ªëng k√™
                        </button>
                    </div>
                    <button class="nav-btn" data-section="settings">
                        <span>‚öôÔ∏è</span> C√†i ƒë·∫∑t
                    </button>
                </nav>
                
                <div class="sidebar-actions">
                    <button id="clearChat" class="btn-secondary">üóëÔ∏è X√≥a tr√≤ chuy·ªán</button>
                    <button id="logoutBtn" class="btn-secondary" style="background: #e74c3c;">üö™ ƒêƒÉng xu·∫•t</button>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Chat Section -->
                <section id="chatSection" class="section active">
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="message system">
                                <p>üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω t∆∞ v·∫•n s·ª©c kh·ªèe. H·ªèi t√¥i v·ªÅ dinh d∆∞·ª°ng, t·∫≠p th·ªÉ d·ª•c, gi·∫•c ng·ªß, stress, ph√≤ng ch·ªëng b·ªánh - m·ªçi ƒëi·ªÅu ƒë·ªÉ s·ªëng kh·ªèe h∆°n! üí™</p>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <div class="input-wrapper">
                                <input 
                                    type="text" 
                                    id="messageInput" 
                                    placeholder="H·ªèi v·ªÅ s·ª©c kh·ªèe..." 
                                    autocomplete="off"
                                >
                                <button id="sendBtn" class="btn-primary">‚û§</button>
                            </div>
                            <div class="info-text">
                                <span id="contextInfo"></span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Search Section -->
                <section id="searchSection" class="section">
                    <div class="search-container">
                        <h2>üîç T√¨m ki·∫øm C∆° s·ªü D·ªØ li·ªáu</h2>
                        
                        <div class="search-box">
                            <input 
                                type="text" 
                                id="searchInput" 
                                placeholder="Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm..."
                            >
                            <button id="searchBtn" class="btn-primary">T√¨m ki·∫øm</button>
                        </div>
                        
                        <div id="searchResults" class="search-results"></div>
                    </div>
                </section>

                <!-- History Section -->
                <section id="historySection" class="section">
                    <div class="history-container">
                        <h2>üìù L·ªãch s·ª≠ tr√≤ chuy·ªán</h2>
                        <div id="chatHistoryList" class="chat-history-list"></div>
                    </div>
                </section>

                <!-- Knowledge Base Info Section -->
                <section id="kbInfoSection" class="section">
                    <div class="kb-info-container">
                        <h2>üìö Th√¥ng tin C∆° s·ªü D·ªØ li·ªáu</h2>
                        
                        <div class="info-grid">
                            <div class="info-card">
                                <h3>üìÑ S·ªë l∆∞·ª£ng T√†i li·ªáu</h3>
                                <p id="docCount" class="stat-number">0</p>
                            </div>
                            <div class="info-card">
                                <h3>üß† Model Nh√∫ng</h3>
                                <p id="embeddingModel" class="stat-text">-</p>
                            </div>
                            <div class="info-card">
                                <h3>ü§ñ Model LLM</h3>
                                <p id="llmModel" class="stat-text">-</p>
                            </div>
                            <div class="info-card">
                                <h3>‚úÖ Tr·∫°ng th√°i</h3>
                                <p id="kbStatus" class="stat-text">Ch∆∞a t·∫£i</p>
                            </div>
                        </div>
                        
                        <div class="kb-actions">
                            <button id="loadKB" class="btn-primary">üì• T·∫£i C∆° s·ªü D·ªØ li·ªáu</button>
                            <button id="reInitKB" class="btn-secondary">üîÑ T·∫°o l·∫°i t·ª´ T√†i li·ªáu</button>
                        </div>
                    </div>
                </section>

                <!-- Admin Users Section -->
                <section id="adminUsersSection" class="section">
                    <div class="admin-container">
                        <h2>üë• Qu·∫£n l√Ω User</h2>
                        <div id="usersTable" class="users-table"></div>
                        <div id="usersPagination" class="pagination"></div>
                    </div>
                </section>

                <!-- Admin Audit Log Section -->
                <section id="adminAuditSection" class="section">
                    <div class="admin-container">
                        <h2>üìä Audit Log</h2>
                        <div id="auditLogsTable" class="audit-logs-table"></div>
                        <div id="auditPagination" class="pagination"></div>
                    </div>
                </section>

                <!-- Admin Stats Section -->
                <section id="adminStatsSection" class="section">
                    <div class="admin-container">
                        <h2>üìà Th·ªëng k√™ H·ªá th·ªëng</h2>
                        <div id="adminStats" class="admin-stats-grid"></div>
                        <div id="recentChatsAdmin" class="recent-chats"></div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settingsSection" class="section">
                    <div class="settings-container">
                        <h2>‚öôÔ∏è C√†i ƒë·∫∑t</h2>
                        
                        <div class="settings-group">
                            <h3>üë§ H·ªì s∆° c√° nh√¢n</h3>
                            <div class="setting-item">
                                <label>T√™n ƒë·∫ßy ƒë·ªß:</label>
                                <input type="text" id="userFullName" class="input-field">
                            </div>
                            <button id="updateProfileBtn" class="btn-secondary">C·∫≠p nh·∫≠t h·ªì s∆°</button>
                        </div>
                        
                        <div class="settings-group">
                            <h3>üîê B·∫£o m·∫≠t</h3>
                            <div class="setting-item">
                                <label>M·∫≠t kh·∫©u c≈©:</label>
                                <input type="password" id="oldPassword" class="input-field">
                            </div>
                            <div class="setting-item">
                                <label>M·∫≠t kh·∫©u m·ªõi:</label>
                                <input type="password" id="newPassword" class="input-field">
                            </div>
                            <div class="setting-item">
                                <label>X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi:</label>
                                <input type="password" id="confirmNewPassword" class="input-field">
                            </div>
                            <button id="changePasswordBtn" class="btn-secondary">ƒê·ªïi m·∫≠t kh·∫©u</button>
                        </div>
                        
                        <div class="settings-group">
                            <h3>API & K·∫øt n·ªëi</h3>
                            <div class="setting-item">
                                <label>Backend URL:</label>
                                <input type="text" id="backendUrl" value="http://localhost:5000" class="input-field">
                            </div>
                            <button id="testConnection" class="btn-secondary">üß™ Ki·ªÉm tra K·∫øt n·ªëi</button>
                        </div>
                        
                        <div class="settings-group">
                            <h3>Th√¥ng tin</h3>
                            <p>Phi√™n b·∫£n: 2.0.0</p>
                            <p>C√¥ng ngh·ªá: Flask + SQL Server + JWT + Vector Database</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Markdown & HTML Sanitizer -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
